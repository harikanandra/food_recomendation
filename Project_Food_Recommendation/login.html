<!DOCTYPE html>
<html>
<head>
    <title>Login | Smart Recipe System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background: linear-gradient(to right,#1e3c72,#2a5298);
}
.auth-card{
    margin-top:80px;
    border-radius:15px;
    box-shadow:0 0 15px rgba(0,0,0,0.3);
}
</style>
</head>

<body>

<div class="container">
<div class="row justify-content-center">
<div class="col-md-4">

<div class="card p-4 auth-card">

<h3 class="text-center text-primary mb-3">Smart Recipe System</h3>

<ul class="nav nav-tabs mb-3">
<li class="nav-item">
<a class="nav-link active" id="login-tab" onclick="showLogin()">Login</a>
</li>
<li class="nav-item">
<a class="nav-link" id="signup-tab" onclick="showSignup()">Signup</a>
</li>
</ul>

<!-- LOGIN -->
<div id="loginForm">
<input type="email" id="loginEmail" class="form-control mb-2" placeholder="Email">
<input type="password" id="loginPassword" class="form-control mb-3" placeholder="Password">
<button class="btn btn-primary w-100" onclick="login()">Login</button>
</div>

<!-- SIGNUP -->
<div id="signupForm" style="display:none;">
<input type="text" id="signupName" class="form-control mb-2" placeholder="Full Name">
<input type="email" id="signupEmail" class="form-control mb-2" placeholder="Email">
<input type="password" id="signupPassword" class="form-control mb-3" placeholder="Password">
<button class="btn btn-success w-100" onclick="signup()">Signup</button>
</div>

</div>
</div>
</div>
</div>

<script>

function showLogin(){
document.getElementById("loginForm").style.display="block";
document.getElementById("signupForm").style.display="none";
}

function showSignup(){
document.getElementById("loginForm").style.display="none";
document.getElementById("signupForm").style.display="block";
}

function signup(){

let name = document.getElementById("signupName").value;
let email = document.getElementById("signupEmail").value;
let password = document.getElementById("signupPassword").value;

if(!name || !email || !password){
alert("Please fill all fields");
return;
}

let users = JSON.parse(localStorage.getItem("users")) || [];

let exists = users.find(u => u.email === email);
if(exists){
alert("User already exists");
return;
}

users.push({name,email,password});
localStorage.setItem("users",JSON.stringify(users));

alert("Signup successful! Please login.");
showLogin();
}

function login(){

let email = document.getElementById("loginEmail").value;
let password = document.getElementById("loginPassword").value;

let users = JSON.parse(localStorage.getItem("users")) || [];

let user = users.find(u => u.email === email && u.password === password);

if(!user){
alert("Invalid credentials. Please signup first.");
return;
}

localStorage.setItem("user", user.name);
localStorage.setItem("email", user.email);

window.location.href = "health_details.html";
}

</script>

</body>
</html>
